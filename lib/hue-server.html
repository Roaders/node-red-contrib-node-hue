<script type="text/x-red" data-template-name="node-hue-bridge">
  <div class="form-row">
    <label for="node-config-input-address"><i class="fa fa-globe"></i> Host</label>
    <input type="text" id="node-config-input-address">
  </div>
  <div class="form-row">
    <label for="node-config-input-key"><i class="fa fa-key"></i> API key</label>
    <input type="text" id="node-config-input-key">
  </div>
  <div class="form-row">
    <label for="node-config-input-interval"><i class="fa fa-clock-o"></i> Poll interval</label>
    <input type="text" id="node-config-input-interval">
  </div>
  <div class="form-row">
    <label for="node-config-input-name"><i class="fa fa-tag"></i> Name</label>
    <input type="text" id="node-config-input-name">
  </div>
</script>

<script type="text/x-red" data-help-name="node-hue-bridge">
  <p>Server managing communication with Philips Hue bridge.</p>
  <ul>
    <li><b>address</b> Hue bridge address</li>
    <li><b>key</b> Hue bridge API key</li>
    <li><b>interval</b> Interval that is used to poll lights for changes (min 500ms)</li>
    <li><b>name</b> Server name</li>
  </ul>
</script>

<script type="text/javascript">
RED.nodes.registerType('node-hue-bridge',{
  category: 'config',
  defaults: {
    name:    { value: 'Hue Bridge',  required: true },
    address: { value: null,          required: true },
    key:     { value: null,          required: true },
    interval: { 
      value: 10000,
      required: true,
      validate: function(v) { 
        return (/^[0-9]+/.test(v) && parseInt(v,10) >= 500); 
      },
    },
  },
  label: function() {
    return this.name;
  }
});
</script>
